{% extends "layout.html" %}



{% block content %}
<script src='/static/liste.js' defer></script> 
<script src='/static/Hi.js' defer></script>


<div id='globale' style='padding-top:20px;padding-left:35px;padding-right:35px'>


	<div id='contenu' >
		
		
		<!-- champ permettant d'enregistrer des clusters de transmissions -->
		<div id='selection'>
			<div id='add_sel'>
				<input id="cluster_name" name="text"  placeholder='nom du cluster...' oninput="add_cluster();"> <button id="add_b" class="sel_b"  title="Ajouter un cluster de transmissions" disabled><img src='/static/images/add-selection.png' style='width:20px'></button><button id="del_sel"  title="Supprimer le cluster de transmissions sélectionné " disabled><img src='/static/images/rubbish-bin.png' style='width:20px'></button>
			</div>
			<select id='cluster_sel' style='width:100%;height:auto;background-color:white' multiple>
				{% for r in sel %}
				<option class='option' value={{r.value}}>{{ r.name }}</option>
				{% endfor %}
			</select>
		</div>


		<!-- box de renseignement sur ce qui est affiché -->
		<div  id='stat_table' >
			<p><h3><span id='tabletot' style='color:#14485f;font-weight:bold'></span> analyses au total</h3></p>
			<p><h3><span id='tablesize' style='color:#14485f;font-weight:bold'></span> analyse(s) affichée(s) </h3></p>
			<p><h3><span id='selected' style='color:#14485f;font-weight:bold'></span> analyse(s) selectionnée(s) <input style=";margin-left:20px" type='checkbox' id="sel" title="Afficher uniquement les analyses sélectionnées"> </input></h3></p>
		</div>


		<!-- champs de trie et de recherche dans la base de données -->
		<div id='innerdiv'>
		<p>
			<form method="post" action={{url_for('trier_list2')}}>
			<select id="trie" name='select_val'onchange=trier()>
					
					  <option value='trier'  disabled selected>trier par...</option>
					  <option value='id'>id</option>
					  <option value='sample'>sample</option>
					  <option value='SNP_hi'>SNP</option>
					  <option value='nVariants_hi'>nVariants</option>

			</select>
			<input disabled id="boutton_trier" type="submit" value="trier" title="Trier le tableau" method='post'/>
			<input type="text" placeholder='Search for...' id='myInput' title="Rechercher une analyse dans la base de données" onkeyup=search()  />
			</form>
		</p>


			<!-- tableau d'affichage des analyses de la BD -->
			<table class='customers'>
				<thead ><tr><th>id</th><th>échantillon</th><th >analyse <button id="sel" onclick=all_select()  title="Sélectionner toutes les analyses affichées"><img src='/static/images/select.png' style='height:20px'></th><th>DEL</th><th>INS</th><th>SNP</th><th>nVariants</th></tr></thead>
  
				<tbody>
					{% for a in analyses %}
					<tr>
					<td>{{a.id}}</td>
					<td>{{a.nom}}</td>
					<td><a href="{{url_for('analyse_view', val=a.id)}}">{{a.sample}}</a></td>
					<td>{{a.DEL_hi}}</td>
					<td>{{a.INS_hi}}</td>
					<td style='font-weight:bold'>{{a.SNP_hi}}</td>
					<td>{{a.nVariants_hi}}</td>
					<td style='visibility:hidden;border:0;'><input  type="checkbox"  class="check" > </td>
					</tr>
					{% endfor %}
				</tbody>
			</table>
		</div>
		
		
		<!-- boutton permettant de remonter en haut de page -->
		<button id="haut" ><img src='/static/images/arrow-up.png' style='height:22px'></button>
		<!-- boutton permettant de construire la matrice de distances avec les SNP des fichiers Hi_filter -->
		<button id="aligner" class='bou' title="Construire la matrice de distances avec les SNPs des fichiers <xxxclean.PVD.Hi_filter.csv> des analyses sélectionnées" onclick=aligner_hi() disabled  >matrice</button>
		<!-- boutton permettant de construire les séquences artificielles des SNP des fichiers Hi_filter -->
		<button id="align_file" class='bou' title="Construire un fichier contenant les séquences artificielles des SNPs des fichiers <xxxLoHi.csv> des analyses sélectionnées" onclick="alignement_SNPs()" disabled  >séquences SNPs</button>
		<!-- boutton permettant de trouver des analyses dont la distance à H37RV est proche de l'analyse sélectionnée -->
		</button><button id="network" onclick=dist_ref_cluster()  title="Trouver les analyses dont la distance SNPs à H37Rv est égale à celle de l'analyse sélectionnée +/- 20 SNPs" disabled >+/-20 SNPs</button> <!-- <img src='/static/images/network.png' style='height:30px'> -->
		
		<img title="INFO : les mesures de polymorphisme (SNP, DEL, INS et nVariants) ont été calculées par alignement avec le génome de référence H37Rv. Elles sont basées sur les fichiers de variants <xxx.clean.PVD.Hi_filter.csv> produits par le pipeline DIANA. " src='/static/images/info.png' style='height:22px;position:absolute;top:565px;left:400px;'>
	</div>
</div>


{% endblock %}
